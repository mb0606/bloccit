<% if @comment.valid? %>
  $(".js-comments").prepend("<%= escape_javascript(render(@comment)) %>");
  $(".new_comment").replaceWith("<%= escape_javascript(render partial: 'comments/form', locals: { topic: @topic, post: @post, comment: @new_comment }) %>");
  $('.js-comments-count').html("<%= pluralize(@post.comments.count,'Comment')%>");
  $('.js-comments-count').append("<div class= 'alert alert-success'><%= flash[:notice]%></div>");
  $('.js-show-hide').trigger('click');
<% else %>
  $(".new_comment").replaceWith("<%= escape_javascript(render partial: 'comments/form', locals: { topic: @topic, post: @post, comment: @comment }) %>");
<% end %>